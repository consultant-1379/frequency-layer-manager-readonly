# Place this file in  project root directory with name tasker_config.yaml
# All file paths are relative to project root
docker:
  # temporary docker images will be pushed to this repo path. Image names and tags will be generated by tasker. Omit any trailing '/'
  image_repo: "armdocker.rnd.ericsson.se"
  repo_path: "proj-ec-son-dev/eric-son-frequency-layer-manager"
  images:
    - id: "src"
      path: "."
    - id: "test"
      path: "./testsuite/integration/jee"
charts:
  # helm test will be executed after 'helm installing' this chart
  test:
    path: "./charts/eric-son-frequency-layer-manager-integration"
    # 'helm dependency update' will pull latest charts that are published.
    # If any local charts are to be used, specify here. After running the 'helm dependency update'
    # in the test chart, the charts mentioned below will be packaged and put into the 'charts' folder
    # of the test chart.
    local_dependencies:
      - path: "./charts/eric-son-frequency-layer-manager"
        description: "source chart"
    # --set for test chart
    # Variables can be used in set with the {{variable}} syntax. Everything described in this yaml file and
    # values generated by tasker will be available.
    # eg:
    #    - {{ docker.image_repo }} will be "armdocker.rnd.ericsson.se"
    #    - {{generated.docker.images.test.name}} will be the tasker generated image name for docker image with ID test
    set:
      - "testsuite.image.repository='{{ docker.image_repo }}/{{ docker.repo_path }}'"
      - "testsuite.image.name='{{ generated.docker.images.test.name }}'"
      - "testsuite.image.tag='{{ generated.docker.images.test.tag }}'"
      - "eric-son-frequency-layer-manager.imageCredentials.eric-son-frequency-layer-manager.repoPath={{ docker.repo_path }}"
      - "eric-son-frequency-layer-manager.images.eric-son-frequency-layer-manager.name={{ generated.docker.images.src.name }}"
      - "eric-son-frequency-layer-manager.images.eric-son-frequency-layer-manager.tag={{ generated.docker.images.src.tag }}"
      - "eric-son-frequency-layer-manager.eric-cm-topology-model-sn.zookeeper.enabled=true"
      - "eric-son-frequency-layer-manager.eric-cm-topology-model-sn.kafka.enabled=true"
    # Any additional values.yaml files
    values_yaml_files:
      - "./values.min.yaml"
    timeouts:
      install: 2000
      test: 2000
artifactory:
  # Required for clean up of the uploaded image.
  # 'HTTP delete' request will be executed on the image_base_uri/{generated image name}/{generated_image_tag}
  # for each of the generated images. Omit any trailing '/'
  # Note:
  # An API key is required to be defined in the $HOME/tasker_config/artifactory_api_key
  # API key can be obtained from https://armdocker.rnd.ericsson.se/artifactory/webapp/#/profile after logging in. Copy
  # and paste to $HOME/tasker_config/artifactory_api_key
  image_base_uri: "https://arm.epk.ericsson.se/artifactory/docker-v2-global-local/proj-ec-son-dev/eric-son-frequency-layer-manager"